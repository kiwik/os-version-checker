<html>
<head>
<title>Openstack versions info</title>
<script type="text/javascript" charset="utf8" src="https://code.jquery.com/jquery-3.5.1.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.21/css/jquery.dataTables.css">
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.js"></script>
<style>
.MISSING.sorting_1 {background-color: #F1948A !important; font-weight: bold;}
.OUTDATED.sorting_1 {background-color: #F0B27A !important; font-weight: bold;}
.OK.sorting_1 {background-color: #7DCEA0 !important; font-weight: bold;}
.invisible tr  {
    border: none !important;
    border-size: 0;
}
.btn_release {
  padding: 10px 25px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 18px;
  margin: 4px 2px;
  cursor: pointer;
  font-weight: bold;
}
</style>
<script>
$(document).ready( function () {
  {% for release in packages_versions_data %}
    $('#table-{{ release }}').DataTable();
  {% endfor %}
} );
</script>
<script>
window.onload = function(){
{% set packages_version_data2 = packages_version_data %}
{% for release in packages_versions_data %}
var {{ release }}Div = document.getElementById("div-{{ release }}");
var {{ release }}Button = document.getElementById("{{ release }}Button");

{% if loop.index == 1 %}
{{release}}Div.style.display = "block";
{% else %}
{{release}}Div.style.display = "none";
{% endif %}
{% set block_id = loop.index %}
{{ release }}Button.onclick = function () {
  {% for release in packages_versions_data %}
  {% if block_id == loop.index %}
  {{ release }}Div.style.display = "block";
  {% else %}
  {{ release }}Div.style.display = "none";
  {% endif %}
  {% endfor %}
}
{% endfor %}
}
</script>
</head>
<body>
<table id="table-switcher" class="switcher">
    <tr>
        <td class="invisible" colspan="5">
          {% for release in packages_versions_data %}
            <input type="button" id="{{ release }}Button" value="{{ release }}" class="btn_release">
          {% endfor %}
        </td>
    </tr>
</table>
<br><br>
{% for release in packages_versions_data %}
{% set release_packages_versions_data = packages_versions_data[release] %}
<div id="div-{{ release }}">
<table id="table-{{ release }}" class="display" data-page-length='{{ release_packages_versions_data|length }}'>
    <thead>
        <tr>
            <th>#</th>
            <th>Upstream Source<br>Debian Source</th>
            <th>Upstream<br>Version</th>
            <th>Debian<br>Version</th>
            <th>Status</th>
        </tr>
    </thead>
    <tbody>
        {% for package in release_packages_versions_data %}
        <tr>
            <td>{{ loop.index }}.</td>
            <td>{{ package }}</td>
            <td>{{ release_packages_versions_data[package]['upstream_package_version'] }}</td>
            <td>{{ release_packages_versions_data[package]['debian_package_version'] }}</td>
            <td class="{{ release_packages_versions_data[package]['status'] }} sorting_1">{{ release_packages_versions_data[package]['status'] }}</td>
        </tr>
        {%endfor%}
    </tbody>
</table>
</div>
{% endfor %}
</body>
